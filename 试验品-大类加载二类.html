<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>商品详情页</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">

    <link rel="stylesheet" href="./layui/css/layui.css" media="all">
    <script src="js/url.js" type="text/javascript"></script>
    <script src="js/function.js" type="text/javascript"></script>
    <script src="./lib/layui/layui.js" charset="utf-8"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

    <script>
        //本文档的自定义函数
    </script>
</head>
<body>
<form class="layui-form" action="">

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">请选择大类</label>
            <div class="layui-input-inline">
                <select name="modules" lay-verify="required" lay-search="" lay-filter="big-type" id="big-type" >
                    <option value="">大类选择</option>
                    <option value="1">羊兔专区</option>
                    <option value="2">水产专区</option>
                    <option value="3">调理专区</option>
                    <option value="4">品牌专区</option>
                    <option value="5">鸭鹅专区</option>
                    <option value="6">猪肉专区</option>
                    <option value="7">鸡鸽专区</option>
                    <option value="8">牛肉专区</option>
                    <option value="9">腌熏专区</option>
                    <option value="10">火锅专区</option>
                    <option value="11">米面果蔬</option>
                    <option value="12">菜系专区</option>
                </select>
            </div>
        </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">二级商品</label>
            <div class="layui-input-inline">
                <select name="modules" lay-verify="required" lay-search="" id="second-type" >
                    <option value="">二级商品选择</option>
                    <option value="1">layer</option>
                    <option value="2">form</option>
                    <option value="3">layim</option>
                    <option value="4">element</option>
                </select>
            </div>
        </div>
    </div>

</form>

<script src="./layui/layui.js" charset="utf-8"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
<script>
    layui.use(['form', 'layedit', 'laydate'], function(){
        var form = layui.form
            ,layer = layui.layer;

        //监听指定开关
        form.on('select(big-type)', function(data){
            var big_type=$("#big-type").val();
            if(big_type==0) {
                layer.msg("请选择大类类型");
                return ;
            }
            init(big_type);
        });

    });

    function init(big_type_id) {
        $.ajax({
            type: "POST",
            url: remoteURL + "/SmallType/selectByBigId",
            data: {bigId: big_type_id},
            dataType: "json",
            success: function (data) {
                select_reload(data);
            }
        });
    }

    function select_reload(datas) {
        var second_type=document.getElementById("second-type");
        second_type.innerHTML="";
        for (var i=0;i<datas.length;i++) {
            var data=datas[i];
            second_type.innerHTML+="<option value='"+data.id+"'>"+data.name+"</option>"
        }

        layui.use(['form', 'layedit', 'laydate'], function(){
            var form = layui.form;
            form.render();
        });
    }
</script>
</body>
</html>